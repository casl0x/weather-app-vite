(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const c=document.querySelector("#city");async function d(r){try{const o=await(await fetch(`https://nominatim.openstreetmap.org/search?q=${r}&format=json&limit=5&featureType=city`)).json();c.innerHTML="",o.forEach(n=>{const t=document.createElement("option");t.value=n.name,c.appendChild(t)})}catch(e){console.error("error",e.message),alert("Fail : city not foud !")}}const f="3f23b6f16c2b419d6eaa598f5f59f93a";async function p(r){try{let o=await(await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${r}&appid=b092dfbd427eeed434ba45afb8508f0a`)).json(),n=o[0].lat,t=o[0].lon;return{latitude:n,longitude:t}}catch(e){console.error("error",e.message),alert("Fail : no loc !")}}async function m(r){try{const e=r.latitude,o=r.longitude,t=await(await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${o}&appid=${f}&units=metric&lang=fr`)).json();console.log(t)}catch(e){console.error("error",e.message),alert("Fail : no weather !")}}function h(r){const e=document.querySelector(".weather");e.innerHTML=`
            <div class="weather-info">
                <p class="weather-info-city">${r.city.name}</p>
                <!-- <img class="weather-info-picture"> -->
            </div>
        `;const o=document.createElement("div");o.classList.add("weather-week");for(let n=1;n<7;n++){const t=document.createElement("div");t.classList.add("weather-daily");const s=document.createElement("img");s.classList.add("icon"),y(r,s),t.innerHTML=`
                    <p class="weather-daily-temp">${Math.round(r.list[n].main.temp)}&deg;C</p>
                    <p class="weather-daily-feels">Feels like : ${Math.round(r.list[n].main.feels_like)}&deg;C</p>
                    <img src="${s.src}" class="weather-daily-icon">
                    <p>${r.list[n].weather[0].main}</p>
            `,o.appendChild(t)}e.appendChild(o)}function y(r,e){r.list[i].weather[0].main==="Rain"?e.src="assets/img/icon/rain.png":r.list[i].weather[0].main==="Clouds"||r.list[i].weather[0].main==="Mist"?e.src="assets/img/icon/cloud.png":r.list[i].weather[0].main==="Clear"?e.src="assets/img/icon/cloud-sun.png":r.list[i].weather[0].main==="Snow"?e.src="assets/img/icon/snowflake.png":r.list[i].weather[0].main==="Sunny"?e.src="assets/img/icon/sun.png":r.list[i].weather[0].main==="Thunderstorm"||r.list[i].weather[0].main==="Drizzle"?e.src="assets/img/icon/thunderstorm.png":e.src="assets/img/icon/cloud-sun.png"}async function u(r){let e;r==!0?(e=localStorage.getItem("cities"),e==null&&(e="Miami")):r==!1&&(e=document.querySelector(".search-input").value,localStorage.setItem("cities",e));const o=await p(e),n=await m(o);h(n)}u(!0);const l=document.querySelector(".search-input");l.addEventListener("input",function(){d(l.value)});const g=document.querySelector(".search-btn");g.addEventListener("click",()=>u(!1));
